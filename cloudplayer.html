<!DOCTYPE html>
<HTML>
<HEAD>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta name="Keywords" content="webMIDIAPI,Controller,Alphabeat">
	<title>Alphabeat Player</title>
	<script src="https://code.jquery.com/jquery-1.11.2.js"></script>
  <script type="text/javascript" src="js/alphabeatmidiapi.js"></script>
	<script type="text/javascript" src="js/player.js"></script>
  <script type="text/javascript" src="js/sc-player.js"></script>
  <script type="text/javascript" src="js/wrapper.js"></script>
  <script type="text/javascript" src="js/helper.js"></script>
  <script type="text/javascript" src="https://w.soundcloud.com/player/api.js"></script>
</HEAD>
<body>
<table>
  <tr>
    <th>Deck 1</th>
    <th></th>
    <th>Deck 2</th>
  </tr>
  <tr>
    <td><div class="deck"></div></td>
    <td></td>
    <td><div class="deck"></div></td>
  </tr>
  <tr>
    <td><div class="info"></div><div class="pos"></div></td>
    <td><input type="file" id="selector" accept=".mp3,.wav,.ogg" style="display: none;" multiple></td>
    <td><div class="info"></div><div class="pos"></div></td>
  </tr>
  <tr>
    <td><audio controls class="player" preload="metadata"></audio></td>
    <td><input type="button" value="File..." onclick="document.getElementById('selector').click();" /></td>
    <td><audio controls class="player" preload="metadata"></audio></td>
  </tr>
  <tr>
    <td colspan="3">
      <select id="fileList" Size="10" style="width: 100%;">
        <option value="1276388710">Carbon Birds</option>
        <option value="629033148">Sebek & Rhea Silvia - Daedalus</option>
        <option value="322240467">Alpha 9 - Higher Place</option>
        <option value="1416301537">Alpha 9 - Stars Above Us</option>
        <option value="1416375997">Alpha 9 - Into the Unknown</option>
        <option value="890428561">Spencer Brown & Alpha 9 - Afterlife</option>
        <option value="994476076">Jack Back - Permanence</option>
        <option value="299955417">Solarstone - Spectrum</option>
        <option value="901252663">CamelPhat - Witching Hour</option>
        <option value="186781641">CamelPhat feat. A*M*E - Paradigm</option>
        <option value="1454054704">Markus Schulz - Progressive & Organic House Mix</option>
        <option value="140733385">Xilent - Pixel Journey</option>
      </select>  
    </td>
  </tr>
</table>
Messages:
<pre id="log"></pre>
<script>
  var fileSelector = document.getElementById("selector"),
  fileList = document.getElementById("fileList"),
  pos = $('div[class="pos"]'),
  info = $('div[class="info"]'),
  player = $('audio[class="player"]'),
  deck = $('div[class="deck"]'),
  prevSecs = -1,
  prevMins = -1,
  fileStore = [];

  window.onload = function(){
	  initMIDI();
    control[0] = new Wrapper(0);
    control[1] = new Wrapper(1);
  }

  window.onbeforeunload = function(){
    killPlayer();
  };

  fileList.ondblclick = function(){
    if(this.selectedIndex >=0){
      loadSelectedEntry();
    }
  };

  function loadSelectedEntry(){
    const selectedIdx = fileList.selectedIndex;
    var trackID = fileList.options[selectedIdx].value;
    if(trackID){
      return loadSCTrackID(trackID);
    } else {
      return loadLocalFile(fileStore[selectedIdx]);
    }
  }

  fileList.addEventListener("keyup", (event) => {
    const selectedIdx = fileList.selectedIndex; 
    if(event.repeat || selectedIdx < 0)
      return;

    switch (event.key) {
      case "Enter":
        loadSelectedEntry();
      break;
      case " ": //Space-Key
        var id = loadSelectedEntry();;
        control[id].play();
      break;  
      case "Del":
      case "Delete":
        fileStore.splice(selectedIdx, 1);
        fileList.remove(selectedIdx);
      break;
      default:
        // printInfo(`Key "${event.key}" pressed [event: keydown]`);
      return;
    } 
  },false);

  // drag & drop files to list
  fileList.addEventListener("dragenter", drag, false);
  fileList.addEventListener("dragover", drag, false);
  fileList.addEventListener("drop", (event) => {
    drag(event);
    const dt = event.dataTransfer;
    addFiles(dt.files);
  });

  function drag(event) {
    event.stopPropagation();
    event.preventDefault();
  }

  function addFiles(files){
    var count = fileStore.push.apply(fileStore,files);
    printInfo(`${count} files added`);
    Array.from(files).forEach(item => {
      var option = document.createElement("option");
      option.text = item.name;
      fileList.add(option); 
    });
  }

// New File selected
fileSelector.addEventListener('change', (event) => {
  if(fileSelector.files.length > 0){
    addFiles(fileSelector.files);
  }
});

createPlayerEvents();

</script>
</body>